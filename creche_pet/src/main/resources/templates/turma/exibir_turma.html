<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Painel Administrativo - Lar dos Pets</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="../css/exibir.css" rel="stylesheet">

 
</head>

	<body>
	  <div th:insert="~{layout/header}"></div>

	  <main >
		<div th:replace="layout/mensagens :: mensagens"></div>
		
	    <div class="d-flex justify-content-between align-items-center mb-4">
	      <h2>Turmas</h2>
	      <a th:href="@{/cadastrar_turma}" class="btn btn-success" sec:authorize="hasRole('ADMIN')">Nova Turma</a>
	    </div>

		<!-- Campo de pesquisa -->
		    <div class="mb-4">
		      <input type="text" class="form-control" placeholder="Pesquisar por Turma..." id="searchInput" onkeyup="searchTable()" />
		    </div>

	    <!-- Tabela dinâmica -->
		<div th:unless="${#lists.isEmpty(turmas)}">
	    <div class="table-responsive">
	      <table class="table table-bordered table-hover" id="turmasTable">
	        <thead class="table-light">
	          <tr>
	            <th>Turma</th>
	            <th>Descrição</th>   
				<th>Hora (Inicio)</th>   
				<th>Hora (Fim)</th>   
				<th>Capacidade</th>   
				<th sec:authorize="hasRole('ADMIN')">Ações</th>
	          </tr>
	        </thead>
	        <tbody>         			

	          <tr th:each="t: ${turmas}">
				<td th:text="${t.idTurma}"></td>
	            <td th:text="${t.descricao}"></td>
				<td th:text="${t.horaInicio}"></td>
				<td th:text="${t.horaFim}"></td>
				<td th:text="${t.capacidade}"></td>

	            <td sec:authorize="hasRole('ADMIN')">
					<a th:href="@{/turma/editar/{id}(id=${t.idTurma})}" class="btn btn-primary">Editar</a>
				
					<a th:href="@{/turma/excluir/{id}(id=${t.idTurma})}" class="btn btn-danger">Excluir</a>
					
					</td>
	            </td>
	          </tr>
	        </tbody>
	      </table>
	    </div>
	  </main>

	

  <div th:insert="~{layout/footer}"></div>

  <!-- Bootstrap e JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  


  <!-- Script de busca -->
    <script>
      function searchTable() {
        const input = document.getElementById("searchInput").value.toLowerCase();
        const rows = document.querySelectorAll("#turmasTablet body tr");

        rows.forEach(row => {
          const idTurma = row.cells[0].textContent.toLowerCase(); // Coluna da função
          if (idTurma.includes(input)) {
            row.style.display = "";
          } else {
            row.style.display = "none";
          }
        });
      }
    </script>
  
 
  


</body>
</html>

