<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matrícula</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
	
</head>

<body>
	
	<div th:insert="~{layout/header}"></div>

            <!-- Conteúdo principal -->
            <main>
				<div th:replace="layout/mensagens :: mensagens"></div>
				
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>Cadastrar Matrícula</h2>
                    <a th:href="@{/exibir_matricula}" class="btn btn-success">Exibir Matrícula</a>
                </div>
				
				

                <!--formulário -->
				
				<form th:action="@{/cadastrar_matricula/salvar}" th:object="${matricula}" method="post" id="cadastroForm" class="needs-validation" novalidate>

				
					<div class="card border-secondary mb-4"> 
					  <div class="card-header bg-secondary text-white fw-bold">Dados </div>
					  <div class="card-body">
					    
						<div class="mb-3">
						  <label for="idPet" class="form-label">Pet:</label>
						  <select id="idPet" class="form-select" th:field="*{idPet}" required>
						    <option value="">Selecione o pet</option>
						    <option th:each="pet : ${pets}"
						            th:value="${pet.idPet}"
						            th:text="|${pet.nome} - ${pet.tutor.nome}|">
						    </option>
						  </select>
						  <div class="invalid-feedback">Selecione o pet.</div>
						</div>


						  
						<div class="mb-3">
							<label for="idTurma" class="form-label">Turma:</label>
						    <select id="idTurma" class="form-select" th:field="*{idTurma}" required>
						    <option value="">Selecione a turma</option>
						    <option th:each="t : ${turmas}"
						            th:value="${t.idTurma}"
						            th:text="${t.idTurma + ' - ' + t.descricao}">
						    </option>
						    </select>
						    <div class="invalid-feedback">Selecione a Turma.</div>
						</div>


			
						  <div class="mb-3">
						    <label for="dataMatricula" class="form-label">Data da Matrícula:</label>
						    <input type="date" class="form-control" id="dataMatricula" th:field="*{dataMatricula}" required>
						    <div class="invalid-feedback">Informe a data da matrícula.</div>
						  </div>


						
						  <div class="mb-3">
						    <label for="ativo" class="form-label">Ativo:</label>
						    <select class="form-select" id="ativo" th:field="*{ativo}" required>
						      <option value="" >Selecione o status</option>
						      <option value="Sim">Sim</option>
						      <option value="Nao">Não</option>
						    </select>
						    <div class="invalid-feedback">Informe se a matrícula está ativa.</div>
						  </div>


					  </div>
					</div>


				  <div class="d-grid gap-2 d-md-flex justify-content-md-end">
				    <button type="submit" class="btn btn-warning text-dark fw-bold">Salvar</button>
				  </div>

				 
				</form>

			
				<!-- Fim Formulario-->
				
            </main>


			<div th:insert="~{layout/footer}"></div>
			
			

            <!-- Bootstrap e JavaScript -->
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>


            <!-- Inputmask JavaScript puro -->
            <script src="https://unpkg.com/inputmask@5.0.8/dist/inputmask.min.js"></script>
			

            <script>
                // Validação Bootstrap 5 ao submeter
                (function () {
                    const form = document.getElementById('cadastroForm');
                    form.addEventListener('submit', function (event) {
                        if (!form.checkValidity()) {
                            event.preventDefault();
                            event.stopPropagation();
                        }
                        form.classList.add('was-validated');
                    }, false);
                })();
            </script>
			
			<script>
			  // Formata o input enquanto o usuário digita
			  function formatarMoeda(input) {
			    let valor = input.value.replace(/\D/g, ""); // remove tudo que não é número
			    valor = (valor / 100).toFixed(2);          // divide por 100 para ter casas decimais
			    valor = valor.replace(".", ",");           // troca ponto por vírgula
			    valor = valor.replace(/\B(?=(\d{3})+(?!\d))/g, "."); // adiciona milhares
			    input.value = "R$ " + valor;               // adiciona o prefixo R$
			  }

			  // Antes de enviar, limpa máscara e deixa apenas número no formato Java
			  document.getElementById("cadastroForm").addEventListener("submit", function() {
			    const valor = document.getElementById("valor");
			    // Remove "R$", pontos e troca vírgula por ponto
			    valor.value = valor.value.replace("R$", "").replace(/\./g, "").replace(",", ".");
			  });
			</script>






</body>

</html>

<style>
   html,
   body {
     height: 100%;
     margin: 0;
     padding: 0;
   }

   body {
     display: flex;
     flex-direction: column;
     padding-top: 140px;
     padding-bottom: 70px;
     background-color: #ffffff;
   }

   header {
     z-index: 1000;
   }

   main {
     flex: 1;
     background-color: #f4f6f8;
     padding: 2rem 1rem;
     width: 100%;
   }

   /* Centraliza o conteúdo do main */
   main > * {
     max-width: 960px;
     margin-left: auto;
     margin-right: auto;
	 margin-bottom: 30px;
    
   }


   footer {

     position: fixed;
     bottom: 0;
     left: 0;
     right: 0;
   }

   /* Estilo de links do menu */
   .nav-link {
     transition: background-color 0.2s, color 0.2s;
   }

   .nav-link:hover {
     background-color: #e0e0e0;
 
     color: #000;
     border-radius: 4px;
   }
   
   .fim{
	padding-bottom: 30px;
   }
 </style>