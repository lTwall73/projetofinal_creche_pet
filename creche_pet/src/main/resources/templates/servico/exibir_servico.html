<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Painel Administrativo - Lar dos Pets</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="../css/exibir.css" rel="stylesheet">

 
</head>

	<body>
	  <div th:insert="~{layout/header}"></div>

	  <main >
		<div th:insert="~{layout/mensagens :: mensagens}"></div>
		
	    <div class="d-flex justify-content-between align-items-center mb-4">
	      <h2>Serviços</h2>
	      <a th:href="@{/cadastrar_servico}" class="btn btn-success" sec:authorize="hasRole('ADMIN')">Novo Serviço</a>
	    </div>

		<!-- Campo de pesquisa -->
		    <div class="mb-4">
		      <input type="text" class="form-control" placeholder="Pesquisar por Nome..." id="searchInput" onkeyup="searchTable()" />
		    </div>

	    <!-- Tabela dinâmica -->
		<div th:unless="${#lists.isEmpty(servicos)}">
	    <div class="table-responsive">
	      <table class="table table-bordered table-hover" id="servicosTable">
	        <thead class="table-light">
	          <tr>
	            <th>Nome</th>
	            <th>Descrição</th>
	            <th>Valor</th>
				<th sec:authorize="hasRole('ADMIN')">Ações</th>
	          </tr>
	        </thead>
	        <tbody>         			

	          <tr th:each="s: ${servicos}">
	            <td th:text="${s.nome}"></td>
	            <td th:text="${s.descricao}"></td>
				<td th:text="${s.valor}"></td>
	            <td  sec:authorize="hasRole('ADMIN')">
					<a th:href="@{/servico/editar/{id}(id=${s.idServico})}" class="btn btn-primary">Editar</a>
				
					<a th:href="@{/servico/excluir/{id}(id=${s.idServico})}" class="btn btn-danger">Excluir</a>
					
					</td>
	            </td>
	          </tr>
	        </tbody>
	      </table>
	    </div>
	  </main>

	

  <div th:insert="~{layout/footer}"></div>

  <!-- Bootstrap e JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  


  <!-- Script de busca -->
    <script>
      function searchTable() {
        const input = document.getElementById("searchInput").value.toLowerCase();
        const rows = document.querySelectorAll("#servicosTablet body tr");

        rows.forEach(row => {
          const nome = row.cells[0].textContent.toLowerCase(); // Coluna da função
          if (nome.includes(input)) {
            row.style.display = "";
          } else {
            row.style.display = "none";
          }
        });
      }
    </script>
  
 
  


</body>
</html>

